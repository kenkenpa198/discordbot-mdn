<!-- omit in toc -->
# ![ãŠã—ã‚ƒã¹ã‚Šã¼ã£ã¨ï¼ã‚‚ã ã­ã¡ã‚ƒã‚“](images/kv.png)

<p align="center"><b>ãŠã—ã‚ƒã¹ã‚Šã¼ã£ã¨ï¼ã‚‚ã ã­ã¡ã‚ƒã‚“</b></p>

<!-- omit in toc -->
## ç›®æ¬¡

- [1. ã‚‚ã ã­ã¡ã‚ƒã‚“ã¨ã¯ï¼Ÿ](#1-ã‚‚ã ã­ã¡ã‚ƒã‚“ã¨ã¯)
- [2. Bot ã®å°å…¥æ–¹æ³•ãƒ»ä½¿ã„æ–¹](#2-bot-ã®å°å…¥æ–¹æ³•ä½¿ã„æ–¹)
- [3. æ§‹ç¯‰](#3-æ§‹ç¯‰)
    - [3.1. å¿…è¦ãªã‚‚ã®](#31-å¿…è¦ãªã‚‚ã®)
    - [3.2. å®Ÿè¡Œæ‰‹é †](#32-å®Ÿè¡Œæ‰‹é †)
- [4. ä½¿ç”¨ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢](#4-ä½¿ç”¨ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢)
- [5. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](#5-ãƒ©ã‚¤ã‚»ãƒ³ã‚¹)
- [6. å‚è€ƒæ–‡çŒ®](#6-å‚è€ƒæ–‡çŒ®)
    - [6.1. Discord Bot](#61-discord-bot)
    - [6.2. Docker](#62-docker)
- [7. è¬è¾](#7-è¬è¾)

## 1. ã‚‚ã ã­ã¡ã‚ƒã‚“ã¨ã¯ï¼Ÿ

ã‚‚ã ã­ã¡ã‚ƒã‚“ã¯ã€ãƒœã‚¤ã‚¹ãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ« Discord ä¸Šã§åƒã„ã¦ãã‚Œã‚‹èª­ã¿ä¸Šã’ Bot ã§ã™ã€‚  
ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ãƒãƒ«ã«æŠ•ç¨¿ã•ã‚ŒãŸæ–‡ç« ã‚’ãƒœã‚¤ã‚¹ãƒãƒ£ãƒ³ãƒãƒ«ã§èª­ã¿ä¸Šã’ã¦ãã‚Œã¾ã™ã€‚

ã€Œã—ã‚ƒã¹ã‚‹ã®ãŒæ¥ãšã‹ã—ã„ã€ã€Œæ·±å¤œãªã®ã§å£°ã‚’å‡ºã—ã«ãã„ã€ãªã©ã®ç†ç”±ã§ãŠå£°ã‚’å‡ºã—ã¥ã‚‰ã„æ–¹ã§ã‚‚ã€ãŠå‹é”ã¨æ¥½ã—ãä¼šè©±ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

åƒã„ã¦ã„ã‚‹æ§˜å­ã¯ã“ã¡ã‚‰ğŸŒ¸ï¼ˆYoutube ã¸ç§»å‹•ã—ã¾ã™ï¼‰

[<img src="images/movie_thumbnail.jpg" alt="èª­ã¿ä¸Šã’Bot ã‚‚ã ã­ã¡ã‚ƒã‚“ ç´¹ä»‹å‹•ç”»" width="70%">](https://youtu.be/cRBdej7tsGc)

## 2. Bot ã®å°å…¥æ–¹æ³•ãƒ»ä½¿ã„æ–¹

[ğŸ“™ãŠä»•äº‹å†…å®¹ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯](https://github.com/kenkenpa198/discordbot-mdn/wiki/ğŸ“™ãŠä»•äº‹å†…å®¹ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯) ã‚’ã”è¦§ãã ã•ã„ã€‚  
â€» ã”å”åŠ›ã„ãŸã ã„ã¦ã„ã‚‹å°‘æ•°ã®ã‚µãƒ¼ãƒãƒ¼ã«ã¦è©¦é¨“é‹ç”¨ä¸­ã®ãŸã‚ã€ç¾åœ¨ Bot ã®ä¸€èˆ¬å…¬é–‹ã¯è¡Œã£ã¦ãŠã‚Šã¾ã›ã‚“ã€‚

## 3. æ§‹ç¯‰

ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ Bot ã‚’ç¨¼åƒã•ã›ã‚‹å ´åˆã¯ä»¥ä¸‹ã®æ‰‹é †ã§è¡Œã„ã¾ã™ã€‚  
å®Ÿè¡Œã«é–¢ã—ã¦ã¯è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚

### 3.1. å¿…è¦ãªã‚‚ã®

- Docker ãŠã‚ˆã³ Docker Compose ãŒå®Ÿè¡Œå¯èƒ½ãªç’°å¢ƒï¼ˆæ‰‹é †ã¯ WSL2 ä¸Šã§ã®å®Ÿè¡Œï¼‰
- ç´„ 850 MB ä»¥ä¸Šã®ç©ºãå®¹é‡ï¼ˆä¸‹è¨˜å†…è¨³ï¼‰
    - `discordbot-mdn_main` ã‚¤ãƒ¡ãƒ¼ã‚¸: 546 MB
    - `postgres` ã‚¤ãƒ¡ãƒ¼ã‚¸: 217 MB
    - `discordbot-mdn_db-volume` ãƒœãƒªãƒ¥ãƒ¼ãƒ : 50 MB ï½
- Discord Bot ã®ãƒˆãƒ¼ã‚¯ãƒ³

### 3.2. å®Ÿè¡Œæ‰‹é †

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã€‚

    ```shell
    $ git clone https://github.com/kenkenpa198/discordbot-mdn.git
    ```

2. ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•ã€‚

    ```shell
    $ cd discordbot-mdn
    ```

3. `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨˜è¿°ã€‚

    ```shell
    $ cp .env.sample .env
    $ vim .env
    ```

    ```properties
    # PostgreSQL ã‚¤ãƒ¡ãƒ¼ã‚¸ç”¨ã®ç’°å¢ƒå¤‰æ•°
    POSTGRES_USER=discordbot_mdn
    POSTGRES_PASSWORD=__ENTER_PG_PASSWORD_HERE__ # å¥½ã¿ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨˜è¿°
    POSTGRES_DB=discordbot_mdn_db

    # PostgreSQL ã®æ¥ç¶šç”¨ URL
    DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB}

    # bot ã®ãƒˆãƒ¼ã‚¯ãƒ³
    BOT_TOKEN=__ENTER_BOT_TOKEN_HERE__           # Discord Bot ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨˜è¿°
    ```

4. `docker-compose` ã‚³ãƒãƒ³ãƒ‰ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’ç«‹ã¡ä¸Šã’ã€‚

    ```shell
    $ docker-compose up -d
    Creating network "discordbot-mdn_default" with the default driver
    ...
    Creating discordbot-mdn_db_1   ... done
    Creating discordbot-mdn_main_1 ... done
    ```

5. `main_1` `db_1` ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚

    ```shell
    $ docker ps
    CONTAINER ID   IMAGE                      ...   NAMES
    aaaaaaaaaaaa   discordbot-mdn_main        ...   discordbot-mdn_main_1
    bbbbbbbbbbbb   postgres:14.5-alpine3.16   ...   discordbot-mdn_db_1
    ```

6. ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’ç¢ºèªã€‚`main_1` å´ã®ãƒ­ã‚°ã¸ `Hello, World!` ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã° OK ã€‚

    ```shell
    $ docker-compose logs -f
    main_1  | ====================================
    main_1  |            discordbot-mdn
    main_1  | ====================================
    main_1  | 2022-11-08 21:55:43.408075
    main_1  | python 3.10.6
    main_1  | discord.py 2.0.1
    main_1  | 2022-11-08 21:55:43,409 [ INFO ] Bot ã‚’èµ·å‹•
    ...
    main_1  | 2022-11-08 21:55:47,198 [ INFO ] Bot ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®å‡¦ç†ã‚’å®Œäº†
    main_1  | 2022-11-08 21:55:47,198 [ INFO ] Hello, World!
    ```

7. Bot ã‚’æ‹›å¾…ã—ãŸã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œç¢ºèªã€‚  
å‚è€ƒ: [ğŸ“™ãŠä»•äº‹å†…å®¹ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯](https://github.com/kenkenpa198/discordbot-mdn/wiki/ğŸ“™ãŠä»•äº‹å†…å®¹ã‚¬ã‚¤ãƒ‰ãƒ–ãƒƒã‚¯)

## 4. ä½¿ç”¨ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

- [Rapptz/discord.py](https://github.com/Rapptz/discord.py)  
Copyright (c) 2015-present Rapptz  
License: [https://github.com/Rapptz/discord.py/blob/master/LICENSE](https://github.com/Rapptz/discord.py/blob/master/LICENSE)
- [zomysan/alkana.py](https://github.com/zomysan/alkana.py)  
License: [https://github.com/zomysan/alkana.py/blob/master/LICENSE](https://github.com/zomysan/alkana.py/blob/master/LICENSE)
- [Opus](https://opus-codec.org)  
License: [https://opus-codec.org/license/](https://opus-codec.org/license/)
- [psycopg2-binary](https://pypi.org/project/psycopg2-binary/)  
License: [https://www.psycopg.org/docs/license.html](https://www.psycopg.org/docs/license.html)
- [emptypage/open_jtalk:22.04-1.11](https://hub.docker.com/layers/emptypage/open_jtalk/22.04-1.11/images/sha256-16f1ee83f32f019c5a44eb14fd557fa36a3ff00b89e064c65e47d81f193c9601?context=explore)  
Copyright Â© 2020 Masaaki Shibata  
License: [https://bitbucket.org/emptypage/open_jtalk-docker/src/master/LICENSE](https://bitbucket.org/emptypage/open_jtalk-docker/src/master/LICENSE)
- [postgres:14.5-alpine3.16](https://hub.docker.com/layers/library/postgres/14.5-alpine3.16/images/sha256-db802f226b620fc0b8adbeca7859eb203c8d3c9ce5d84870fadee05dea8f50ce?context=explore)  
License: [https://www.postgresql.org/about/licence/](https://www.postgresql.org/about/licence/)

## 5. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

[MIT License](LICENSE)

## 6. å‚è€ƒæ–‡çŒ®

### 6.1. Discord Bot

- [discord.py ã¸ã‚ˆã†ã“ãã€‚](https://discordpy.readthedocs.io/ja/latest/#)
- [Pythonã§å®Ÿç”¨Discord Bot(discordpyè§£èª¬) - Qiita](https://qiita.com/1ntegrale9/items/9d570ef8175cf178468f)
- [DiscordBoté–‹ç™ºå®Ÿè·µå…¥é–€ - cod-sushi - BOOTH](https://cod-sushi.booth.pm/items/2391223)
- [DiscordBoté‹å–¶å®Ÿè·µå…¥é–€ - cod-sushi - BOOTH](https://booth.pm/ja/items/1533599)
- [psycopg2 ãƒ¡ãƒ¢ - Qiita](https://qiita.com/hitsumabushi845/items/a421aff1bcd7999f7e40)
- [Pythonã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã§[]ã¨ã‹{}ã‚’ä½¿ã†ã¹ãã§ã¯ãªã„ã¨ã„ã†è©± | Cosnomi Blog](https://blog.cosnomi.com/posts/1471/)
- [Logging HOWTO â€” Python 3.11.0b5 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.python.org/ja/3/howto/logging.html)

### 6.2. Docker

- [ç¤¾å†…ã®Dockerfileã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å…¬é–‹ã—ã¾ã™â”‚FORCIA CUBEâ”‚ãƒ•ã‚©ãƒ«ã‚·ã‚¢æ ªå¼ä¼šç¤¾](https://www.forcia.com/blog/002273.html)
- [Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ¬ã‚¤ãƒ¤ã®è€ƒãˆæ–¹ã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã®è»½é‡åŒ–ã«ã¤ã„ã¦ - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ç›®æŒ‡ã—ã¦](https://www.itbook.info/network/docker02.html)
- [docker-composeã§ã‚µãƒ¼ãƒ“ã‚¹é‹ç”¨ã—ã¦ã„ã‚‹ãªã‚‰è¨­å®šã—ã¦ãŠããŸã„ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ãƒˆ - Qiita](https://qiita.com/harachan/items/fa306cc1e6b497e592c3)
- [ã€Dockerã€‘PostgreSQLã®èµ·å‹•æ™‚ã«åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— | ç´ äººã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®è‹¦æ‚©](https://amateur-engineer.com/docker-compose-postgresql/)
- [postgresql - Error when running psql command in /docker-entrypoint-initdb.d/db_init.sh (psql: could not connect to server: Connection refused) - Stack Overflow](https://stackoverflow.com/questions/51659972/error-when-running-psql-command-in-docker-entrypoint-initdb-d-db-init-sh-psql)
- [Postgreså…¬å¼Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ‰±ã„ã«ã¤ã„ã¦](https://zenn.dev/dowanna6/articles/6cc31869346a06)

## 7. è¬è¾

ã—ã°ãŸã¾ã•ã‚ãã•ã‚“ã€æ•é£ŸåŸŸã®çš†ã•ã‚“ã«ç›¸è«‡ã‚„ãƒ†ã‚¹ãƒˆãªã©ã§ã”å”åŠ›ã„ãŸã ãã¾ã—ãŸã€‚  
ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼
